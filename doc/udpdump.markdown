# 程序名称

udpdump - 抓取、显示和存储UDP数据包

# 命令行语法

udpdump [options] port

# 功能描述

udpdump是一个高性能的UDP抓包工具。它能够从指定的端口接收UDP数据包（datagram）, 并输出到标准输出（stdout）,或者写入到给定的文件中。

# 命令行选项

port

    端口号是必须指定的参数。这是一个0~65536之间的整型数，需要与发送端的目标端口号一致。

-n SIZE

    指定接收数据的最大字节数，程序在获取到SIZE大小的数据后退出。如未指定，则程序持续接收和输出数据包，直到用户退出（ctrl+c)。

-a ADDRESS

    从指定的IP地址接收。当主机存在多个网口时，可以通过指定接收端IP的方式选择从哪个网口收取数据。

-o FILE

    接收到的数据写入到文件名为FILE的文件。如果没有指定，则输出到标准输出（stdout）。当输出到标准输出时，您可以通过管道（pipe）向他程序输出数据。

-d

    哑模式，仅接收数据，但不输出。这项功能在进行通讯速率测试时可能有用。

-b SIZE

    指定接收数据包的最大值，以字节为单位。常规udp数据包的大小在0-1500之间，您可以根据发送端的特性指定一个上限。如未指定，默认值为2048。

-q LENGTH

    指定接收缓冲队列的长度。udpdump使用一个循环队列来缓存接收到的数据。当出现由于IO写入延迟或CPU性能原因造成输出速率与接收速率不一致时，缓冲区能够避免数据的丢失。如果内存空间足够，选取一个比较大的队列长度对避免数据溢出有很大的作用。默认队列长度为65536。

-v

    开启详细信息输出。当指定这一选项时， 程序会向stderr输出详细的接收状态信息。

-1

    单行信息输出模式，一种比较“好看”的输出效果。仅在指定-v时有效。
-h

    打印帮助信息

# 输出信息格式

当开启-v选项时，程序会输出实时更新的状态信息，其中几项主要的信息有：

        Received - 已接收的字节数
        Speed    - 瞬时接收速度（Bytes/s)
        Dropped  - 溢出字节数

# 退出状态

正常退出时udpdump返回0。如果程序出现错误，则返回一个小于0的值。

# 示例

1. 从8192端口接收数据包，并输出到标准输出：
    >udpdump 8192


2. 从8192端口接收数据包，并输出到data.dat文件：
    >udpdump -o data.dat 8192

3. 从8192端口接收数据包，输出到data.dat文件，并显示实时状态：
    >udpdump -o data.dat -v 8192

4. 从8192端口接收数据包，并利用grep命令搜索“hello”字符串：
    >udpdump 8192 | grep "hello"
